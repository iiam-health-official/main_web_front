{"ast":null,"code":"import{useMemo,useCallback,useState,useRef,useEffect}from\"react\";import{createPortal}from\"react-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";const PortalPopup=_ref=>{let{children,overlayColor,placement=\"Centered\",onOutsideClick,zIndex=100,left=0,right=0,top=0,bottom=0,relativeLayerRef}=_ref;const relContainerRef=useRef(null);const[relativeStyle,setRelativeStyle]=useState({opacity:0});const popupStyle=useMemo(()=>{const style={};style.zIndex=zIndex;if(overlayColor){style.backgroundColor=overlayColor;}if(!(relativeLayerRef!==null&&relativeLayerRef!==void 0&&relativeLayerRef.current)){switch(placement){case\"Centered\":style.alignItems=\"center\";style.justifyContent=\"center\";break;case\"Top left\":style.alignItems=\"flex-start\";break;case\"Top center\":style.alignItems=\"center\";break;case\"Top right\":style.alignItems=\"flex-end\";break;case\"Bottom left\":style.alignItems=\"flex-start\";style.justifyContent=\"flex-end\";break;case\"Bottom center\":style.alignItems=\"center\";style.justifyContent=\"flex-end\";break;case\"Bottom right\":style.alignItems=\"flex-end\";style.justifyContent=\"flex-end\";break;default:break;}}style.opacity=1;return style;},[placement,overlayColor,zIndex,relativeLayerRef]);const setPosition=useCallback(()=>{var _relativeLayerRef$cur,_relContainerRef$curr;const relativeItem=relativeLayerRef===null||relativeLayerRef===void 0?void 0:(_relativeLayerRef$cur=relativeLayerRef.current)===null||_relativeLayerRef$cur===void 0?void 0:_relativeLayerRef$cur.getBoundingClientRect();const containerItem=relContainerRef===null||relContainerRef===void 0?void 0:(_relContainerRef$curr=relContainerRef.current)===null||_relContainerRef$curr===void 0?void 0:_relContainerRef$curr.getBoundingClientRect();const style={opacity:1};if(relativeItem&&containerItem){const{x:relativeX,y:relativeY,width:relativeW,height:relativeH}=relativeItem;const{width:containerW,height:containerH}=containerItem;style.position=\"absolute\";switch(placement){case\"Top left\":style.top=relativeY-containerH-top;style.left=relativeX+left;break;case\"Top right\":style.top=relativeY-containerH-top;style.left=relativeX+relativeW-containerW-right;break;case\"Bottom left\":style.top=relativeY+relativeH+bottom;style.left=relativeX+left;break;case\"Bottom right\":style.top=relativeY+relativeH+bottom;style.left=relativeX+relativeW-containerW-right;break;}setRelativeStyle(style);}else{style.maxWidth=\"90%\";style.maxHeight=\"90%\";setRelativeStyle(style);}},[left,right,top,bottom,placement,relativeLayerRef,relContainerRef]);useEffect(()=>{setPosition();window.addEventListener(\"resize\",setPosition);window.addEventListener(\"scroll\",setPosition,true);return()=>{window.removeEventListener(\"resize\",setPosition);window.removeEventListener(\"scroll\",setPosition,true);};},[setPosition]);const onOverlayClick=useCallback(e=>{if(onOutsideClick&&e.target.classList.contains(\"portalPopupOverlay\")){onOutsideClick();}e.stopPropagation();},[onOutsideClick]);return/*#__PURE__*/_jsx(Portal,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col fixed inset-0 portalPopupOverlay\",style:popupStyle,onClick:onOverlayClick,children:/*#__PURE__*/_jsx(\"div\",{ref:relContainerRef,style:relativeStyle,children:children})})});};export const Portal=_ref2=>{let{children,containerId=\"portals\"}=_ref2;let portalsDiv=document.getElementById(containerId);if(!portalsDiv){portalsDiv=document.createElement(\"div\");portalsDiv.setAttribute(\"id\",containerId);document.body.appendChild(portalsDiv);}return/*#__PURE__*/createPortal(children,portalsDiv);};export default PortalPopup;","map":{"version":3,"names":["useMemo","useCallback","useState","useRef","useEffect","createPortal","jsx","_jsx","PortalPopup","_ref","children","overlayColor","placement","onOutsideClick","zIndex","left","right","top","bottom","relativeLayerRef","relContainerRef","relativeStyle","setRelativeStyle","opacity","popupStyle","style","backgroundColor","current","alignItems","justifyContent","setPosition","_relativeLayerRef$cur","_relContainerRef$curr","relativeItem","getBoundingClientRect","containerItem","x","relativeX","y","relativeY","width","relativeW","height","relativeH","containerW","containerH","position","maxWidth","maxHeight","window","addEventListener","removeEventListener","onOverlayClick","e","target","classList","contains","stopPropagation","Portal","className","onClick","ref","_ref2","containerId","portalsDiv","document","getElementById","createElement","setAttribute","body","appendChild"],"sources":["/Users/mxjiam/git/main_web_front/src/Components/PortalPopup.js"],"sourcesContent":["import { useMemo, useCallback, useState, useRef, useEffect } from \"react\";\n\nimport { createPortal } from \"react-dom\";\n\nconst PortalPopup = ({\n  children,\n  overlayColor,\n  placement = \"Centered\",\n  onOutsideClick,\n  zIndex = 100,\n  left = 0,\n  right = 0,\n  top = 0,\n  bottom = 0,\n  relativeLayerRef,\n}) => {\n  const relContainerRef = useRef(null);\n  const [relativeStyle, setRelativeStyle] = useState({\n    opacity: 0,\n  });\n  const popupStyle = useMemo(() => {\n    const style = {};\n    style.zIndex = zIndex;\n\n    if (overlayColor) {\n      style.backgroundColor = overlayColor;\n    }\n    if (!relativeLayerRef?.current) {\n      switch (placement) {\n        case \"Centered\":\n          style.alignItems = \"center\";\n          style.justifyContent = \"center\";\n          break;\n        case \"Top left\":\n          style.alignItems = \"flex-start\";\n          break;\n        case \"Top center\":\n          style.alignItems = \"center\";\n          break;\n        case \"Top right\":\n          style.alignItems = \"flex-end\";\n          break;\n        case \"Bottom left\":\n          style.alignItems = \"flex-start\";\n          style.justifyContent = \"flex-end\";\n          break;\n        case \"Bottom center\":\n          style.alignItems = \"center\";\n          style.justifyContent = \"flex-end\";\n          break;\n        case \"Bottom right\":\n          style.alignItems = \"flex-end\";\n          style.justifyContent = \"flex-end\";\n          break;\n        default:\n          break;\n      }\n    }\n    style.opacity = 1;\n    return style;\n  }, [placement, overlayColor, zIndex, relativeLayerRef]);\n\n  const setPosition = useCallback(() => {\n    const relativeItem = relativeLayerRef?.current?.getBoundingClientRect();\n    const containerItem = relContainerRef?.current?.getBoundingClientRect();\n    const style = { opacity: 1 };\n    if (relativeItem && containerItem) {\n      const {\n        x: relativeX,\n        y: relativeY,\n        width: relativeW,\n        height: relativeH,\n      } = relativeItem;\n      const { width: containerW, height: containerH } = containerItem;\n      style.position = \"absolute\";\n      switch (placement) {\n        case \"Top left\":\n          style.top = relativeY - containerH - top;\n          style.left = relativeX + left;\n          break;\n        case \"Top right\":\n          style.top = relativeY - containerH - top;\n          style.left = relativeX + relativeW - containerW - right;\n          break;\n        case \"Bottom left\":\n          style.top = relativeY + relativeH + bottom;\n          style.left = relativeX + left;\n          break;\n        case \"Bottom right\":\n          style.top = relativeY + relativeH + bottom;\n          style.left = relativeX + relativeW - containerW - right;\n          break;\n      }\n\n      setRelativeStyle(style);\n    } else {\n      style.maxWidth = \"90%\";\n      style.maxHeight = \"90%\";\n      setRelativeStyle(style);\n    }\n  }, [\n    left,\n    right,\n    top,\n    bottom,\n    placement,\n    relativeLayerRef,\n    relContainerRef\n  ]);\n\n  useEffect(() => {\n    setPosition();\n\n    window.addEventListener(\"resize\", setPosition);\n    window.addEventListener(\"scroll\", setPosition, true);\n\n    return () => {\n      window.removeEventListener(\"resize\", setPosition);\n      window.removeEventListener(\"scroll\", setPosition, true);\n    };\n  }, [setPosition]);\n\n  const onOverlayClick = useCallback(\n    (e) => {\n      if (onOutsideClick && e.target.classList.contains(\"portalPopupOverlay\")) {\n        onOutsideClick();\n      }\n      e.stopPropagation();\n    },\n    [onOutsideClick],\n  );\n\n  return (\n    <Portal>\n      <div\n        className=\"flex flex-col fixed inset-0 portalPopupOverlay\"\n        style={popupStyle}\n        onClick={onOverlayClick}\n      >\n        <div ref={relContainerRef} style={relativeStyle}>\n          {children}\n        </div>\n      </div>\n    </Portal>\n  );\n};\n\nexport const Portal = ({ children, containerId = \"portals\" }) => {\n  let portalsDiv = document.getElementById(containerId);\n  if (!portalsDiv) {\n    portalsDiv = document.createElement(\"div\");\n    portalsDiv.setAttribute(\"id\", containerId);\n    document.body.appendChild(portalsDiv);\n  }\n\n  return createPortal(children, portalsDiv);\n};\nexport default PortalPopup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}