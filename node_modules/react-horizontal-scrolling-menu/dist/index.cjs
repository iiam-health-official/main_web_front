!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-horizontal-scrolling-menu"]={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);const o="react-horizontal-scrolling-menu",l="-separator",i=`${o}-${l}`,a=`${o}--item`,s=`${o}--scroll-container`,u=`${o}--wrapper`,d=`${o}--inner-wrapper`,c=`${o}--header`,f=`${o}--arrow-left`,v=`${o}--arrow-right`,m=`${o}--footer`,h="itemId",g="data-key",p="data-index";var b=Object.freeze({__proto__:null,rootClassName:o,separatorString:l,separatorClassName:i,itemClassName:a,scrollContainerClassName:s,wrapperClassName:u,innerWrapperClassName:d,headerClassName:c,arrowLeftClassName:f,arrowRightClassName:v,footerClassName:m,id:h,dataKeyAttribute:g,dataIndexAttribute:p});function y({className:e="",children:t,onScroll:n=(()=>{}),scrollRef:o}){const l=r.default.useMemo((()=>`${s} ${e}`),[e]);return r.default.createElement("div",{className:l,onScroll:n,ref:o},t)}var E=r.default.memo((function({className:e,id:t,index:n,refs:o}){const l=r.default.useRef(null);return o[n]=l,r.default.createElement("div",Object.assign({className:e},{[g]:t,[p]:n},{ref:l}))}));var w=r.default.memo((function({children:e,className:t,id:n,index:o,refs:l}){const i=r.default.useRef(null);return l[String(o)]=i,r.default.createElement("div",Object.assign({className:t},{[g]:n,[p]:o},{ref:i}),e)}));function I(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function x(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function C(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return x(n.overflowY,t)||x(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function N(e,t,n,r,o,l,i,a){return l<e&&i>t||l>e&&i<t?0:l<=e&&a<=n||i>=t&&a>=n?l-e-r:i>t&&a<n||l<e&&a>n?i-t+o:0}var S,M=function(e,t){var n=window,r=t.scrollMode,o=t.block,l=t.inline,i=t.boundary,a=t.skipOverflowHiddenElements,s="function"==typeof i?i:function(e){return e!==i};if(!I(e))throw new TypeError("Invalid target");for(var u,d,c=document.scrollingElement||document.documentElement,f=[],v=e;I(v)&&s(v);){if((v=null==(d=(u=v).parentElement)?u.getRootNode().host||null:d)===c){f.push(v);break}null!=v&&v===document.body&&C(v)&&!C(document.documentElement)||null!=v&&C(v,a)&&f.push(v)}for(var m=n.visualViewport?n.visualViewport.width:innerWidth,h=n.visualViewport?n.visualViewport.height:innerHeight,g=window.scrollX||pageXOffset,p=window.scrollY||pageYOffset,b=e.getBoundingClientRect(),y=b.height,E=b.width,w=b.top,x=b.right,S=b.bottom,M=b.left,$="start"===o||"nearest"===o?w:"end"===o?S:w+y/2,W="center"===l?M+E/2:"end"===l?x:M,k=[],T=0;T<f.length;T++){var O=f[T],V=O.getBoundingClientRect(),R=V.height,j=V.width,A=V.top,H=V.right,B=V.bottom,L=V.left;if("if-needed"===r&&w>=0&&M>=0&&S<=h&&x<=m&&w>=A&&S<=B&&M>=L&&x<=H)return k;var P=getComputedStyle(O),D=parseInt(P.borderLeftWidth,10),_=parseInt(P.borderTopWidth,10),F=parseInt(P.borderRightWidth,10),X=parseInt(P.borderBottomWidth,10),Y=0,q=0,z="offsetWidth"in O?O.offsetWidth-O.clientWidth-D-F:0,J="offsetHeight"in O?O.offsetHeight-O.clientHeight-_-X:0,U="offsetWidth"in O?0===O.offsetWidth?0:j/O.offsetWidth:0,K="offsetHeight"in O?0===O.offsetHeight?0:R/O.offsetHeight:0;if(c===O)Y="start"===o?$:"end"===o?$-h:"nearest"===o?N(p,p+h,h,_,X,p+$,p+$+y,y):$-h/2,q="start"===l?W:"center"===l?W-m/2:"end"===l?W-m:N(g,g+m,m,D,F,g+W,g+W+E,E),Y=Math.max(0,Y+p),q=Math.max(0,q+g);else{Y="start"===o?$-A-_:"end"===o?$-B+X+J:"nearest"===o?N(A,B,R,_,X+J,$,$+y,y):$-(A+R/2)+J/2,q="start"===l?W-L-D:"center"===l?W-(L+j/2)+z/2:"end"===l?W-H+F+z:N(L,H,j,D,F+z,W,W+E,E);var G=O.scrollLeft,Q=O.scrollTop;$+=Q-(Y=Math.max(0,Math.min(Q+Y/K,O.scrollHeight-R/K+J))),W+=G-(q=Math.max(0,Math.min(G+q/U,O.scrollWidth-j/U+z)))}k.push({el:O,top:Y,left:q})}return k};function $(e){return e===Object(e)&&0!==Object.keys(e).length}function W(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if($(t)&&"function"==typeof t.behavior)return t.behavior(n?M(e,t):[]);if(n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:$(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,o=e.top,l=e.left;r.scroll&&n?r.scroll({top:o,left:l,behavior:t}):(r.scrollTop=o,r.scrollLeft=l)}))}(M(e,r),r.behavior)}}var k=function(){return S||(S="performance"in window?performance.now.bind(performance):Date.now),S()};function T(e){var t=k(),n=Math.min((t-e.startTime)/e.duration,1),r=e.ease(n),o=e.startX+(e.x-e.startX)*r,l=e.startY+(e.y-e.startY)*r;e.method(o,l),o!==e.x||l!==e.y?requestAnimationFrame((function(){return T(e)})):e.cb()}function O(e,t,n,r,o,l){var i,a,s,u;void 0===r&&(r=600),void 0===o&&(o=function(e){return 1+--e*e*e*e*e}),i=e,a=e.scrollLeft,s=e.scrollTop,u=function(t,n){e.scrollLeft=Math.ceil(t),e.scrollTop=Math.ceil(n)},T({scrollable:i,method:u,startTime:k(),startX:a,startY:s,x:t,y:n,duration:r,ease:o,cb:l})}var V=function(e,t){var n=t||{};return function(e){return e&&!e.behavior||"smooth"===e.behavior}(n)?W(e,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,behavior:function(e){return Promise.all(e.reduce((function(e,t){var r=t.el,o=t.left,l=t.top,i=r.scrollLeft,a=r.scrollTop;return i===o&&a===l?e:[].concat(e,[new Promise((function(e){return O(r,o,l,n.duration,n.ease,(function(){return e({el:r,left:[i,o],top:[a,l]})}))}))])}),[]))}}):Promise.resolve(W(e,t))};const R=e=>Object.values(e).map((e=>e.current)).filter(Boolean);function j(e,t,n,r,o,l){var i;const a=(null===(i=null==e?void 0:e.entry)||void 0===i?void 0:i.target)||e,s=t||"smooth";if(a)return l?null==a?void 0:a.scrollIntoView({behavior:s,inline:n||"end",block:r||"nearest"}):V(a,Object.assign({behavior:s,inline:n||"end",block:r||"nearest",duration:500},o))}const A=e=>document.querySelector(`[${g}='${e}']`),H=e=>document.querySelector(`[${p}='${e}']`);function B(e){return r.default.isValidElement(e)&&e||"function"==typeof e&&r.default.createElement(e,null)||null}const L=e=>e.filter((e=>!new RegExp(`.*${l}$`).test(e))),P=e=>{var t;return String((null===(t=null==e?void 0:e.props)||void 0===t?void 0:t[h])||String((null==e?void 0:e.key)||"").replace(/^\.\$/,""))};function D({children:e,itemClassName:t="",refs:n,separatorClassName:o=""}){const s=r.default.Children.toArray(e).filter(Boolean),u=s.length,d=r.default.useMemo((()=>`${a} ${t}`),[t]),c=r.default.useMemo((()=>`${i} ${o}`),[o]);return r.default.createElement(r.default.Fragment,null,s.map(((e,t)=>{const o=P(e),i=o+l,a=t+1===u;return[r.default.createElement(w,{className:d,id:o,key:"menuItem__"+o,refs:n,index:t},e),!a&&r.default.createElement(E,{className:c,id:i,refs:n,key:i,index:t+.1})]})))}const _="undefined"!=typeof window?r.default.useLayoutEffect:r.default.useEffect;function F({items:e,itemsChanged:t,refs:n,options:o}){const l=r.default.useRef(),[i,a]=r.default.useState([]),s=r.default.useRef(+setTimeout((()=>{}),0)),u=r.default.useCallback((t=>{e.set(function(e,t){return[...e].map((e=>{var n,r,o,l;const i=e.target,a=String(null!==(r=null===(n=null==i?void 0:i.dataset)||void 0===n?void 0:n.key)&&void 0!==r?r:"");return[a,{index:String(null!==(l=null===(o=null==i?void 0:i.dataset)||void 0===o?void 0:o.index)&&void 0!==l?l:""),key:a,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(t,o)),clearTimeout(s.current),s.current=+setTimeout((()=>requestAnimationFrame((()=>{a((t=>{const n=e.getVisible().map((e=>e[1].key));return JSON.stringify(t)!==JSON.stringify(n)?n:t}))}))),o.throttle)}),[e,o]);return _((()=>{const e=R(n),t=l.current||new IntersectionObserver(u,o);return l.current=t,e.forEach((e=>t.observe(e))),()=>{clearTimeout(s.current),t.disconnect(),l.current=void 0}}),[u,t,o,n]),i}const X=e=>r.default.Children.toArray(e).map(P).filter(Boolean);class Y extends Map{toArr(){return this.sort([...this])}toItems(){return this.toArr().map((([e])=>e))}toItemsWithoutSeparators(){return L(this.toItems())}toItemsKeys(){return this.toItems()}sort(e){return e.sort((([,e],[,t])=>+e.index-+t.index))}set(e,t){return Array.isArray(e)?this.sort(e).forEach((([e,t])=>{super.set(String(e),t)})):super.set(String(e),t),this}first(){var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]}last(){var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]}filter(e){return this.toArr().filter(e)}find(e){return this.toArr().find(e)}findIndex(e){return this.toArr().findIndex(e)}getCurrentPos(e,t){const n=this.toArr().filter((e=>{var n;return t?!(null===(n=null==e?void 0:e[0])||void 0===n?void 0:n.includes(l)):e})),r=n.findIndex((([t,n])=>t===e||n===e));return[n,r]}prev(e,t){var n;const[r,o]=this.getCurrentPos(e,!!t);return-1!==o?null===(n=r[o-1])||void 0===n?void 0:n[1]:void 0}next(e,t){var n;const[r,o]=this.getCurrentPos(e,!!t);return-1!==o?null===(n=r[o+1])||void 0===n?void 0:n[1]:void 0}getVisible(){return this.filter((e=>e[1].visible))}getVisibleElements(){return this.filter((e=>!e[0].includes(l)&&e[1].visible))}}const q={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95],throttle:100};const z=r.default.createContext({}),J=e=>e.reduce(((e,t)=>e.concat(t).concat(`${t}${l}`)),[]).slice(0,-1);const U={current:{}},K=()=>{};e.ScrollMenu=function({LeftArrow:e,RightArrow:t,children:n,Header:o,Footer:i,transitionDuration:a=500,transitionEase:s,transitionBehavior:h,onInit:g=K,onUpdate:p=K,onMouseDown:b,onMouseUp:E,onMouseMove:w,onScroll:I=K,onTouchMove:x,onTouchStart:C,onTouchEnd:N,onWheel:S=K,options:M=q,scrollContainerClassName:$="",itemClassName:W="",separatorClassName:k="",wrapperClassName:T="",apiRef:O=U,RTL:V,noPolyfill:R}){const P=B(e),_=B(t),J=B(o),G=B(i),Q=r.default.useRef(null),[Z]=r.default.useState({}),ee=r.default.useMemo((()=>Object.assign(Object.assign(Object.assign({},q),M),{root:Q.current})),[M,Q.current]),te=r.default.useRef(new Y).current,ne=function(e,t){const[n,o]=r.default.useState(""),i=r.default.useMemo((()=>X(e)),[e]);return r.default.useEffect((()=>{const e=i.filter(Boolean).join("");t.toItemsWithoutSeparators().filter((e=>!i.includes(e))).forEach((e=>{var n,r;const o=(null===(n=t.last())||void 0===n?void 0:n.key)===e&&(null===(r=t.prev(e))||void 0===r?void 0:r.key)||"";t.delete(o),t.delete(`${e}${l}`),t.delete(e)})),o(e)}),[i,t]),n}(n,te),re=F(r.default.useMemo((()=>({items:te,itemsChanged:ne,options:ee,refs:Z})),[te,ne,Z,ee])),oe=!!re.length,le=r.default.useMemo((()=>function(e,t=[],n,r,o,l){var i,a;const s=L(t),u=!!(null===(i=e.first())||void 0===i?void 0:i.visible),d=!!(null===(a=e.last())||void 0===a?void 0:a.visible),c=t=>{var n;return null===(n=e.find((e=>e[1].key===String(t))))||void 0===n?void 0:n[1]},f=()=>{var t,n;return e.prev(null===(n=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1])},v=()=>{var t,n,r,o;return e.next(null===(o=null===(r=null===(n=null===(t=e.getVisible())||void 0===t?void 0:t.slice)||void 0===n?void 0:n.call(t,-1))||void 0===r?void 0:r[0])||void 0===o?void 0:o[1])};return{getItemById:c,getItemElementById:A,getItemByIndex:t=>{var n;return null===(n=e.find((e=>String(e[1].index)===String(t))))||void 0===n?void 0:n[1]},getItemElementByIndex:H,getNextItem:v,getNextElement:()=>{var t,n,r,o;return e.next(null===(o=null===(r=null===(n=null===(t=e.getVisibleElements())||void 0===t?void 0:t.slice)||void 0===n?void 0:n.call(t,-1))||void 0===r?void 0:r[0])||void 0===o?void 0:o[1],!0)},getPrevItem:f,getPrevElement:()=>{var t,n;return e.prev(null===(n=null===(t=e.getVisibleElements())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1],!0)},isFirstItemVisible:u,isItemVisible:e=>s.includes(String(e)),isLastItem:t=>e.last()===c(t),isLastItemVisible:d,scrollNext:(e,t,i,{duration:a,ease:s,boundary:u=(null==n?void 0:n.current)}={})=>{const d=null!=e?e:null==r?void 0:r.behavior;return j(v(),d,t||"start",i||"nearest",{boundary:u,duration:null!=a?a:null==r?void 0:r.duration,ease:null!=s?s:null==r?void 0:r.ease},o||l)},scrollPrev:(e,t,i,{duration:a,ease:s,boundary:u=(null==n?void 0:n.current)}={})=>{const d=null!=e?e:null==r?void 0:r.behavior;return j(f(),d,t||"end",i||"nearest",{boundary:u,duration:null!=a?a:null==r?void 0:r.duration,ease:null!=s?s:null==r?void 0:r.ease},o||l)},scrollToItem:(e,t,o,i,a)=>{var s,u;return j(e,null!=t?t:null==r?void 0:r.behavior,o,i,Object.assign(Object.assign({boundary:null==n?void 0:n.current},a),{duration:null!==(s=null==a?void 0:a.duration)&&void 0!==s?s:null==r?void 0:r.duration,ease:null!==(u=null==a?void 0:a.ease)&&void 0!==u?u:null==r?void 0:r.ease}),l)},visibleElements:s,visibleElementsWithSeparators:t,visibleItems:t,visibleItemsWithoutSeparators:s}}(te,re,Q,{duration:a,ease:s,behavior:h},V,R)),[te,re,ne,V,R]),ie=r.default.useCallback((()=>Object.assign(Object.assign({},le),{initComplete:oe,items:te,visibleElementsWithSeparators:re,scrollContainer:Q})),[le,oe,te,re,Q]),[ae,se]=r.default.useState(ie);!function({cb:e=(()=>{}),condition:t,hash:n}){r.default.useEffect((()=>{t&&e()}),[n,t])}({cb:()=>p(ae),condition:function({cb:e,condition:t}){const[n,o]=r.default.useState(!1);return r.default.useEffect((()=>{t&&!n&&(o(!0),e())}),[t,n]),n}({cb:()=>g(ae),condition:oe}),hash:JSON.stringify(re.concat(String(null==ae?void 0:ae.isFirstItemVisible)).concat(String(null==ae?void 0:ae.isLastItemVisible)))}),r.default.useEffect((()=>se(ie())),[ie]),O.current=ae;const ue=r.default.useCallback((e=>I(ae,e)),[I,ae]),de=r.default.useCallback((e=>S(ae,e)),[S,ae]),ce=r.default.useMemo((()=>`${u} ${T}`),[T]),fe=r.default.useMemo((()=>`${$}${V?" rtl":""}`),[V,$]);return r.default.createElement("div",{className:ce,onWheel:de,onMouseDown:null==b?void 0:b(ae),onMouseUp:null==E?void 0:E(ae),onMouseMove:null==w?void 0:w(ae),onTouchStart:null==C?void 0:C(ae),onTouchMove:null==x?void 0:x(ae),onTouchEnd:null==N?void 0:N(ae)},r.default.createElement(z.Provider,{value:ae},r.default.createElement("div",{className:c},J),r.default.createElement("div",{className:d},r.default.createElement("div",{className:f},P),r.default.createElement(y,{className:fe,onScroll:ue,scrollRef:Q},r.default.createElement(D,{refs:Z,itemClassName:W,separatorClassName:k},n)),r.default.createElement("div",{className:v},_)),r.default.createElement("div",{className:m},G)))},e.VisibilityContext=z,e.constants=b,e.getItemsPos=e=>{var t;const n=(e=>e.filter(((e,t,n)=>{const r=0===t,o=t===n.length-1,i=new RegExp(l).test(e);return!((r||o)&&i)})))(e),r=n[Math.floor(n.length/2)];return{first:null==n?void 0:n[0],center:r,last:null===(t=n.slice(-1))||void 0===t?void 0:t[0]}},e.slidingWindow=function(e,t){const n=L(e),r=L(t);return{prev:()=>J(function(e,t){const n=e.findIndex((e=>e===(null==t?void 0:t[0]))),r=t.length,o=n-r,l=o<0,i=l?0:o,a=e.slice(i,l?r:n);return a.length===r?a:e.slice(n,r)}(n,r)),next:()=>J(function(e,t){const n=e.findIndex((e=>{var n;return e===(null===(n=t.slice(-1))||void 0===n?void 0:n[0])})),r=t.length,o=n+r+1,l=o>e.length-1,i=l?e.length-1:o,a=e.slice(l?i-r+1:n+1,i);return a.length===r?a:e.slice(e.length-r,e.length+r)}(n,r))}},Object.defineProperty(e,"__esModule",{value:!0})}));
